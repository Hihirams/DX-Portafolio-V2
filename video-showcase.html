<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DX Video Showcase - QE DX-INN</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/home.css">
    <link rel="stylesheet" href="css/video-showcase.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;900&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,300;0,400;1,400&family=Inter:wght@300;400;500&display=swap"
        rel="stylesheet">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <link rel="stylesheet" href="css/loader.css">
</head>

<body class="video-showcase-page">
    <!-- Header - Liquid Glass Islands (Same as Home) -->
    <header class="liquid-glass-header">
        <!-- Island 1: Logo -->
        <div class="glass-island glass-island-logo" onclick="window.location.href='index.html'">
            <img src="assets/logo-dx.png" alt="DX Logo" class="island-logo-img">
            <div class="island-logo-text">
                <span class="island-logo-title">QE DX-INN</span>
                <span class="island-logo-subtitle">Digital Transformation</span>
            </div>
        </div>

        <!-- Island 2: Search -->
        <div class="glass-island glass-island-search">
            <svg class="island-search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="11" cy="11" r="8"></circle>
                <path d="m21 21-4.35-4.35"></path>
            </svg>
            <input type="text" class="island-search-input" id="searchInput" placeholder="Search videos...">
        </div>

        <!-- Island 3: Navigation -->
        <div class="glass-island glass-island-nav">
            <button class="island-nav-btn" onclick="window.location.href='index.html'">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path
                        d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6">
                    </path>
                </svg>
                <span>Home</span>
            </button>
            <div class="island-nav-divider"></div>
            <button class="island-nav-btn" onclick="openGeneralPortfolio()">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="3" width="7" height="7" rx="1"></rect>
                    <rect x="14" y="3" width="7" height="7" rx="1"></rect>
                    <rect x="3" y="14" width="7" height="7" rx="1"></rect>
                    <rect x="14" y="14" width="7" height="7" rx="1"></rect>
                </svg>
                <span>Portfolio DX</span>
            </button>
            <div class="island-nav-divider"></div>
            <button class="island-nav-btn" onclick="openProjectManager()">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2"></path>
                    <rect x="9" y="3" width="6" height="4" rx="1"></rect>
                    <path d="M9 12h6M9 16h6"></path>
                </svg>
                <span>Project Overview</span>
            </button>
            <div class="user-section" id="userSection">
                <!-- Se llenar치 din치micamente con Login o User Info -->
            </div>
        </div>

        <!-- Island 4: Upload Video (solo visible cuando hay sesi칩n) -->
        <button class="glass-island glass-island-upload" id="uploadVideoIsland" onclick="openUploadVideoModal()"
            style="display: none;">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                <polyline points="17,8 12,3 7,8" />
                <line x1="12" y1="3" x2="12" y2="15" />
            </svg>
            <span>Upload Video</span>
        </button>
        <!-- Theme toggle removed for this page - always dark mode -->
    </header>

    <!-- Main Content -->
    <main class="main-content video-showcase-main">
        <!-- Hero Section - Featured Video -->
        <section class="hero-video-section">
            <div class="hero-video-bg">
                <img src="https://images.unsplash.com/photo-1581091226825-a6a2a5aee158?w=1920&q=80"
                    alt="Digital Factory" id="heroImage">
            </div>
            <div class="hero-video-content">
                <div class="hero-video-inner">
                    <div class="hero-featured-tag">
                        <span class="line"></span>
                        <span>Featured Project</span>
                    </div>
                    <h1 class="hero-video-title" id="heroTitle">
                        Quality Clinic <br>
                        <span class="gradient-text">Unity 2.0</span>
                    </h1>
                    <div class="hero-video-meta" id="heroMeta">
                        <span class="match">05:12</span>
                        <span>Jan 27, 2026</span>
                        <span>M. Coronel</span>
                    </div>
                    <p class="hero-video-description" id="heroDescription">
                        A unified workspace visualizing real-time KPIs within the plant's 3D environment. Experience the
                        seamless integration of detection and IoT QueryLink linking.
                    </p>
                    <div class="hero-video-actions">
                        <button class="btn-play" onclick="playFeaturedVideo()">
                            <span class="icon material-icons">play_arrow</span>
                            Play
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Video Sections -->
        <div class="video-sections">
            <!-- Latest Innovation Demos -->
            <section class="video-section">
                <div class="section-header-row">
                    <h3 class="section-title">Latest Innovation Demos</h3>
                    <div class="carousel-nav-arrows">
                        <button class="carousel-arrow-btn" id="innovationPrev" aria-label="Previous">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M15 18l-6-6 6-6" stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                        </button>
                        <button class="carousel-arrow-btn" id="innovationNext" aria-label="Next">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M9 18l6-6-6-6" stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="carousel-wrapper">
                    <div class="video-carousel" id="innovationCarousel">
                        <!-- Cards will be generated dynamically -->
                    </div>
                </div>
            </section>

            <!-- Top Departmental Showcases (Ranked) -->
            <section class="video-section">
                <div class="section-header-row">
                    <h3 class="section-title">Top Departmental Showcases</h3>
                    <div class="carousel-nav-arrows">
                        <button class="carousel-arrow-btn" id="rankedPrev" aria-label="Previous">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M15 18l-6-6 6-6" stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                        </button>
                        <button class="carousel-arrow-btn" id="rankedNext" aria-label="Next">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M9 18l6-6-6-6" stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="ranked-carousel" id="rankedCarousel">
                    <!-- Ranked items will be generated dynamically -->
                </div>
            </section>

            <!-- All Videos (formerly Success Stories) -->
            <section class="video-section">
                <div class="section-header-row">
                    <h3 class="section-title">All Videos</h3>
                    <div class="carousel-nav-arrows">
                        <button class="carousel-arrow-btn" id="successPrev" aria-label="Previous">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M15 18l-6-6 6-6" stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                        </button>
                        <button class="carousel-arrow-btn" id="successNext" aria-label="Next">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M9 18l6-6-6-6" stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="carousel-wrapper">
                    <!-- Changed class to video-carousel to match flex/gap styling of top section exactly -->
                    <div class="video-carousel" id="successCarousel">
                        <!-- Success cards will be generated dynamically -->
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Video Player Modal -->
    <div class="video-modal" id="videoModal">
        <div class="video-modal-content">
            <button class="video-modal-close" onclick="closeVideoModal()">
                <span class="material-icons">close</span>
            </button>
            <div class="video-modal-player">
                <video id="videoPlayer" controls>
                    <source src="" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="main-footer">
        <p>&copy; 2025 Digital Transformation Team. All rights reserved</p>
    </footer>

    <!-- Video Info Modal (Netflix Style) -->
    <div class="video-info-modal" id="videoInfoModal">
        <div class="video-info-content">
            <button class="video-info-close" onclick="closeVideoInfoModal()">
                <span class="material-icons">close</span>
            </button>

            <div class="video-info-backdrop">
                <img id="infoModalBackdrop" src="" alt="Video Backdrop">
                <div class="video-info-backdrop-overlay"></div>

                <div class="video-info-header">
                    <h2 class="video-info-title" id="infoModalTitle">Video Title</h2>

                    <div class="video-info-meta-row">
                        <div class="video-info-meta-row">
                            <span class="match-score" id="infoModalDurationDisplay" style="color:#4ade80;">05:20</span>
                            <span class="video-year" id="infoModalDate">Jan 28, 2026</span>
                            <!-- Quality badge removed as requested -->
                        </div>
                    </div>

                    <div class="video-info-actions">
                        <button class="btn-play" id="infoModalPlayBtn">
                            <span class="icon material-icons">play_arrow</span>
                            Play
                        </button>
                    </div>
                </div>
            </div>

            <div class="video-info-body">
                <div class="video-info-main-col">
                    <p class="video-info-description" id="infoModalDescription">
                        Description goes here...
                    </p>
                </div>
                <div class="video-info-side-col">
                    <div class="video-info-item">
                        <span class="label">Creator:</span>
                        <span class="value" id="infoModalCreator">M. Coronel</span>
                    </div>
                    <div class="video-info-item">
                        <span class="label">Tags:</span>
                        <span class="value" id="infoModalTags">Innovation, IoT, 3D</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/data-loader-dev.js"></script>
    <script src="js/file-manager.js"></script>
    <script src="js/init-data.js"></script>
    <script src="js/data-manager.js"></script>
    <script src="js/help-modal.js"></script>
    <script src="js/upload-modal.js"></script>
    <script src="js/loader.js"></script>

    <div id="dx-loader-overlay">
        <div class="dx-loader-bg-elements">
            <div class="dx-blob dx-blob-blue"></div>
            <div class="dx-blob dx-blob-gold"></div>
        </div>

        <div class="dx-animate-entrance" style="display:flex; gap:0.5rem; opacity:0; width:100%; max-width:1200px;">
            <div style="height:1px; width:40px; background:rgba(69,115,165,0.3)"></div>
            <div style="height:1px; width:40px; background:rgba(176,149,93,0.3)"></div>
        </div>

        <div class="dx-animate-entrance" style="display:flex; flex-direction:column; align-items:center; width:100%;">
            <div style="text-align:center; margin-bottom: 2rem;">
                <h1 class="dx-loader-title dx-text-alive">
                    Digital Transformation
                </h1>
                <p class="dx-loader-subtitle">
                    Refining the Future Architecture
                </p>
            </div>

            <div style="width:100%; display:flex; flex-direction:column; align-items:center;">
                <div class="dx-loader-line-container"></div>

                <p id="dx-loader-status"
                    style="color:#86868b; font-size:10px; text-transform:uppercase; letter-spacing:0.1em;">
                    Initializing System
                </p>
            </div>
        </div>

        <div class="dx-loader-footer dx-animate-entrance" style="opacity:0; animation-delay:0.3s;">
            <div class="dx-encrypted-badge">
                <span class="material-symbols-outlined" style="font-size:12px; color:#4573a5;">lock</span>
                <span>Encrypted Connection</span>
            </div>
            <div style="height:1px; width:30px; background:rgba(176,149,93,0.3); margin-top:0.5rem;"></div>
            <p
                style="font-size:9px; color:rgba(134,134,139,0.5); letter-spacing:0.2em; text-transform:uppercase; margin-top:0.25rem;">
                춸 2026 QE DX-INN
            </p>
        </div>
    </div>

    <script>
        // ==================== SAMPLE DATA ====================
        const sampleVideos = {
            innovation: [
                {
                    id: 'vid-001',
                    title: 'Robot Innovation Line',
                    thumbnail: 'https://images.unsplash.com/photo-1485827404703-89b55fcc595e?w=640&q=80',
                    duration: '12:04',
                    date: 'Jan 28, 2026',
                    creator: 'M. Coronel',
                    description: 'Deployment of the new robotic arm series for automated assembly lines.',
                    tags: ['Robotics', 'Automation']
                },
                {
                    id: 'vid-002',
                    title: 'AI Predictive Maintenance',
                    thumbnail: 'https://images.unsplash.com/photo-1555255707-c07966088b7b?w=640&q=80',
                    duration: '8:32',
                    date: 'Jan 20, 2026',
                    creator: 'J. Smith',
                    description: 'AI model predicting machine failures before they happen.',
                    tags: ['AI', 'Maintenance', 'ML']
                },
                {
                    id: 'vid-003',
                    title: 'DX Hold Monitor',
                    thumbnail: 'https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=640&q=80',
                    duration: '15:20',
                    date: 'Jan 15, 2026',
                    creator: 'A. Garcia',
                    description: 'Real-time monitoring system for production holds.',
                    tags: ['Monitoring', 'DX', 'Dashboard']
                },
                {
                    id: 'vid-004',
                    title: 'AR Remote Assist',
                    thumbnail: 'https://images.unsplash.com/photo-1593508512255-86ab42a8e620?w=640&q=80',
                    duration: '6:45',
                    date: 'Jan 10, 2026',
                    creator: 'T. Wilson',
                    description: 'Augmented reality support for remote field technicians.',
                    tags: ['AR', 'Support', 'Innovation']
                },
                {
                    id: 'vid-005',
                    title: 'Smart Warehouse System',
                    thumbnail: 'https://images.unsplash.com/photo-1586528116311-ad8dd3c8310d?w=640&q=80',
                    duration: '10:15',
                    date: 'Dec 28, 2025',
                    creator: 'L. Chen',
                    description: 'Automated inventory tracking using IoT sensors.',
                    tags: ['Warehouse', 'IoT', 'Logistics']
                },
                {
                    id: 'vid-006',
                    title: 'Digital Twin Factory',
                    thumbnail: 'https://images.unsplash.com/photo-1565514020179-026b92b84bb6?w=640&q=80',
                    duration: '9:30',
                    date: 'Dec 15, 2025',
                    creator: 'S. Patel',
                    description: 'Full digital replica of the manufacturing plant.',
                    tags: ['Digital Twin', 'Simulation', '3D']
                },
                {
                    id: 'vid-007',
                    title: 'IoT Sensor Network',
                    thumbnail: 'https://images.unsplash.com/photo-1518770660439-4636190af475?w=640&q=80',
                    duration: '11:22',
                    date: 'Nov 30, 2025',
                    creator: 'R. Davis',
                    description: 'Network of 500+ sensors monitoring environmental conditions.',
                    tags: ['IoT', 'Sensors', 'Environment']
                },
                {
                    id: 'vid-008',
                    title: 'Machine Learning QC',
                    thumbnail: 'https://images.unsplash.com/photo-1677442136019-21780ecad995?w=640&q=80',
                    duration: '7:18',
                    date: 'Nov 12, 2025',
                    creator: 'K. Lee',
                    description: 'Visual inspection system powered by deep learning.',
                    tags: ['ML', 'Quality', 'Vision']
                }
            ],
            ranked: [
                { id: 'dept-001', title: 'Engineering', thumbnail: 'https://images.unsplash.com/photo-1581092921461-eab62e97a780?w=400&q=80', duration: '12:30', date: 'Jan 25, 2026', creator: 'Eng. Dept', description: 'Latest engineering breakthroughs and methodologies.', tags: ['Engineering', 'Design'] },
                { id: 'dept-002', title: 'Supply Chain', thumbnail: 'https://images.unsplash.com/photo-1553413077-190dd305871c?w=400&q=80', duration: '08:45', date: 'Jan 22, 2026', creator: 'SCM Team', description: 'Optimizing the supply chain for maximum efficiency.', tags: ['Supply Chain', 'Logistics'] },
                { id: 'dept-003', title: 'HR & Safety', thumbnail: 'https://images.unsplash.com/photo-1521737711867-e3b97375f902?w=400&q=80', duration: '15:10', date: 'Jan 20, 2026', creator: 'HR Dept', description: 'Safety protocols and human resource updates.', tags: ['HR', 'Safety'] },
                { id: 'dept-004', title: 'IT Infrastructure', thumbnail: 'https://images.unsplash.com/photo-1558494949-ef010cbdcc31?w=400&q=80', duration: '10:20', date: 'Jan 18, 2026', creator: 'IT Support', description: 'Review of current IT infrastructure and future plans.', tags: ['IT', 'Infra'] },
                { id: 'dept-005', title: 'Quality Control', thumbnail: 'https://images.unsplash.com/photo-1581091226033-d5c48150dbaa?w=400&q=80', duration: '09:15', date: 'Jan 15, 2026', creator: 'QC Team', description: 'Ensuring product quality standards are met.', tags: ['Quality', 'Standards'] },
                { id: 'dept-006', title: 'Manufacturing', thumbnail: 'https://images.unsplash.com/photo-1565193566173-7a0ee3dbe261?w=400&q=80', duration: '14:00', date: 'Jan 12, 2026', creator: 'Mfg Ops', description: 'Insights into the manufacturing process and assembly.', tags: ['Manufacturing', 'Production'] },
                { id: 'dept-007', title: 'R&D Innovation', thumbnail: 'https://images.unsplash.com/photo-1532094349884-543bc11b234d?w=400&q=80', duration: '11:45', date: 'Jan 10, 2026', creator: 'R&D Lab', description: 'Exploring new technologies and innovative solutions.', tags: ['R&D', 'Innovation'] },
                { id: 'dept-008', title: 'Maintenance', thumbnail: 'https://images.unsplash.com/photo-1581092160607-ee22621dd758?w=400&q=80', duration: '07:30', date: 'Jan 08, 2026', creator: 'Maint. Crew', description: 'Best practices for equipment maintenance.', tags: ['Maintenance', 'Repair'] },
                { id: 'dept-009', title: 'Logistics', thumbnail: 'https://images.unsplash.com/photo-1586528116311-ad8dd3c8310d?w=400&q=80', duration: '13:20', date: 'Jan 05, 2026', creator: 'Logistics', description: 'Strategies for effective logistics management.', tags: ['Logistics', 'Transport'] },
                { id: 'dept-010', title: 'Finance & Ops', thumbnail: 'https://images.unsplash.com/photo-1554224155-6726b3ff858f?w=400&q=80', duration: '09:50', date: 'Jan 02, 2026', creator: 'Finance', description: 'Financial overview and operational metrics.', tags: ['Finance', 'Operations'] }
            ],
            success: [
                {
                    id: 'success-001',
                    title: 'Global Logistics Sync',
                    description: 'How we achieved 99.9% accuracy in inventory tracking across 14 sites.',
                    thumbnail: 'https://images.unsplash.com/photo-1566576912321-d58ddd7a6088?w=640&q=80',
                    duration: '3m 20s',
                    date: 'Oct 05, 2025',
                    creator: 'Logistics Team',
                    tags: ['Logistics', 'Global']
                },
                {
                    id: 'success-002',
                    title: 'Paperless Floor',
                    description: 'The complete transition to digital worksheets saved 4M sheets annually.',
                    thumbnail: 'https://images.unsplash.com/photo-1504384308090-c894fdcc538d?w=640&q=80',
                    duration: '5m 12s',
                    date: 'Sep 12, 2025',
                    creator: 'Green Ops',
                    tags: ['Sustainability', 'Digital']
                },
                {
                    id: 'success-003',
                    title: 'Virtual Training VR',
                    description: 'Reducing onboarding time by 40% using immersive VR headsets.',
                    thumbnail: 'https://images.unsplash.com/photo-1622979135225-d2ba269cf1ac?w=640&q=80',
                    duration: '4m 05s',
                    date: 'Aug 30, 2025',
                    creator: 'HR Training',
                    tags: ['VR', 'Training']
                },
                {
                    id: 'success-004',
                    title: 'Zero Defect Vision',
                    description: 'AI-powered visual inspection achieving 99.97% defect detection rate.',
                    thumbnail: 'https://images.unsplash.com/photo-1581091226825-a6a2a5aee158?w=640&q=80',
                    duration: '6m 45s',
                    date: 'Aug 15, 2025',
                    creator: 'QC Dept',
                    tags: ['QC', 'AI', 'Zero Defect']
                },
                {
                    id: 'success-005',
                    title: 'Energy Optimization',
                    description: 'Reduced energy consumption by 32% through smart monitoring systems.',
                    thumbnail: 'https://images.unsplash.com/photo-1473341304170-971dccb5ac1e?w=640&q=80',
                    duration: '4m 30s',
                    date: 'Jul 22, 2025',
                    creator: 'Facility Mgmt',
                    tags: ['Energy', 'IoT']
                },
                {
                    id: 'success-006',
                    title: 'Predictive Maintenance',
                    description: 'Prevented $2.5M in unplanned downtime with ML-based predictions.',
                    thumbnail: 'https://images.unsplash.com/photo-1581092160607-ee22621dd758?w=640&q=80',
                    duration: '5m 55s',
                    date: 'Jun 10, 2025',
                    creator: 'Maint. Team',
                    tags: ['Maintenance', 'ML', 'Savings']
                }
            ]
        };

        // ==================== RENDER FUNCTIONS ====================

        function renderInnovationCarousel() {
            const container = document.getElementById('innovationCarousel');
            container.innerHTML = sampleVideos.innovation.map(video => `
                <div class="video-card" onclick="playVideo('${video.id}')">
                    <div class="video-card-thumbnail">
                        <img src="${video.thumbnail}" alt="${video.title}">
                        <span class="video-card-duration">${video.duration}</span>
                        
                        <div class="video-card-overlay">
                            <div class="video-card-hover-actions">
                                <button class="video-card-hover-btn primary">
                                    <span class="icon material-icons">play_arrow</span>
                                </button>
                                <button class="video-card-hover-btn secondary" onclick="event.stopPropagation(); openVideoInfo('${video.id}')">
                                    <span class="icon material-icons">info_outline</span>
                                </button>
                            </div>
                            <div class="video-card-hover-title">${video.title}</div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function renderRankedCarousel() {
            const container = document.getElementById('rankedCarousel');
            container.innerHTML = sampleVideos.ranked.map((item, index) => `
                <div class="ranked-item${index >= 9 ? ' ranked-item-double' : ''}" onclick="openVideoInfo('${item.id}')">
                    <div class="ranked-item-inner">
                        <svg class="ranked-number" viewBox="0 0 ${index >= 9 ? 140 : 70} 150" fill="none" xmlns="http://www.w3.org/2000/svg" style="height: 100%; width: auto; position: absolute; left: 0; bottom: 0; z-index: 0;">
                            <text x="0" y="140" fill="black" stroke="#555" stroke-width="4" font-family="Inter" font-size="160" font-weight="900">${index + 1}</text>
                        </svg>
                        <div class="ranked-poster">
                            <img src="${item.thumbnail}" alt="${item.title}">
                            <div class="ranked-overlay">
                                <div class="ranked-title">${item.title}</div>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function renderSuccessCarousel() {
            const container = document.getElementById('successCarousel');
            // Change class to video-carousel to match styling if needed, or keep success-carousel and ensure styles match
            // The user wanted "same styles", so best to use the video-card class.
            // Note: If we change the container class to video-carousel, we need to update CSS or ensure logic works.
            // But the container is `#successCarousel` which has `success-carousel` class. 
            // `video-carousel` class has flex styling. `success-carousel` also has flex styling but cards were wider.
            // Let's change the inner HTML to generate .video-card elements.

            // Also replace success-carousel class with video-carousel in HTML for consistency? 
            // No, purely changing innerHTML key elements.

            container.innerHTML = sampleVideos.success.map(video => `
                <div class="video-card" onclick="playVideo('${video.id}')">
                    <div class="video-card-thumbnail">
                        <img src="${video.thumbnail}" alt="${video.title}">
                        <span class="video-card-duration">${video.duration}</span>
                        
                        <div class="video-card-overlay">
                            <div class="video-card-hover-actions">
                                <button class="video-card-hover-btn primary">
                                    <span class="icon material-icons">play_arrow</span>
                                </button>
                                <button class="video-card-hover-btn secondary" onclick="event.stopPropagation(); openVideoInfo('${video.id}')">
                                    <span class="icon material-icons">info_outline</span>
                                </button>
                            </div>
                            <div class="video-card-hover-title">${video.title}</div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // ==================== CAROUSEL CONTROLS ====================

        function setupCarouselControls() {
            // Innovation Carousel
            const innovationCarousel = document.getElementById('innovationCarousel');
            const innovationPrev = document.getElementById('innovationPrev');
            const innovationNext = document.getElementById('innovationNext');
            const scrollAmount = 340; // Card width + gap

            innovationPrev.addEventListener('click', () => {
                innovationCarousel.scrollBy({ left: -scrollAmount, behavior: 'smooth' });
            });

            innovationNext.addEventListener('click', () => {
                innovationCarousel.scrollBy({ left: scrollAmount, behavior: 'smooth' });
            });

            // Success Carousel
            const successCarousel = document.getElementById('successCarousel');
            const successPrev = document.getElementById('successPrev');
            const successNext = document.getElementById('successNext');
            const successScrollAmount = 370; // Card width + gap

            successPrev.addEventListener('click', () => {
                // Determine scroll amount based on card width (320px + 16px gap = 336 approx 340)
                // Was 370 for success cards, now using video-cards so 340
                successCarousel.scrollBy({ left: -340, behavior: 'smooth' });
            });

            successNext.addEventListener('click', () => {
                // Determine scroll amount based on card width (320px + 16px gap = 336 approx 340)
                // Was 370 for success cards, now using video-cards so 340
                successCarousel.scrollBy({ left: 340, behavior: 'smooth' });
            });

            // Ranked Carousel
            const rankedCarousel = document.getElementById('rankedCarousel');
            const rankedPrev = document.getElementById('rankedPrev');
            const rankedNext = document.getElementById('rankedNext');
            const rankedScrollAmount = 220; // Item width + gap

            rankedPrev.addEventListener('click', () => {
                rankedCarousel.scrollBy({ left: -rankedScrollAmount, behavior: 'smooth' });
            });

            rankedNext.addEventListener('click', () => {
                rankedCarousel.scrollBy({ left: rankedScrollAmount, behavior: 'smooth' });
            });

            // Enable drag scrolling
            enableDragScroll(innovationCarousel);
            enableDragScroll(successCarousel);
            enableDragScroll(rankedCarousel);
        }

        function enableDragScroll(element) {
            let isDown = false;
            let startX;
            let scrollLeft;

            element.addEventListener('mousedown', (e) => {
                isDown = true;
                element.classList.add('dragging');
                startX = e.pageX - element.offsetLeft;
                scrollLeft = element.scrollLeft;
            });

            element.addEventListener('mouseleave', () => {
                isDown = false;
                element.classList.remove('dragging');
            });

            element.addEventListener('mouseup', () => {
                isDown = false;
                element.classList.remove('dragging');
            });

            element.addEventListener('mousemove', (e) => {
                if (!isDown) return;
                e.preventDefault();
                const x = e.pageX - element.offsetLeft;
                const walk = (x - startX) * 1.5;
                element.scrollLeft = scrollLeft - walk;
            });
        }

        // ==================== VIDEO PLAYER ====================

        function playVideo(videoId) {
            const modal = document.getElementById('videoModal');
            const player = document.getElementById('videoPlayer');

            // In a real implementation, this would load the actual video
            // player.src = `users/user2/ai-videos/videos/${videoId}.mp4`;

            modal.classList.add('active');
            // player.play();
        }

        function closeVideoModal() {
            const modal = document.getElementById('videoModal');
            const player = document.getElementById('videoPlayer');

            modal.classList.remove('active');
            player.pause();
            player.currentTime = 0;
        }

        function playFeaturedVideo() {
            playVideo('featured');
        }

        function showVideoInfo() {
            // Would show a modal with more info about the featured video
            console.log('Show video info');
            openVideoInfo('featured');
        }

        // ==================== VIDEO INFO MODAL ====================

        function openVideoInfo(videoId) {
            const modal = document.getElementById('videoInfoModal');

            // Find video data
            let videoData = null;

            if (videoId === 'featured') {
                videoData = {
                    title: 'Quality Clinic Unity 2.0',
                    description: 'A unified workspace visualizing real-time KPIs within the plant\'s 3D environment. Experience the seamless integration of detection and IoT QueryLink linking.',
                    thumbnail: 'https://images.unsplash.com/photo-1581091226825-a6a2a5aee158?w=1920&q=80',
                    duration: '05:12',
                    match: 98,
                    year: '2026',
                    quality: 'HD',
                    creator: 'M. Coronel',
                    tags: ['Unity', 'IoT', 'Digital Twin']
                };
            } else {
                // Search in sampleVideos
                const allVideos = [...sampleVideos.innovation, ...sampleVideos.success, ...sampleVideos.ranked];
                videoData = allVideos.find(v => v.id === videoId);

                // Add default fields if missing from sample data
                if (videoData) {
                    if (!videoData.creator) videoData.creator = 'DX Team';
                    if (!videoData.date) videoData.date = 'Jan 28, 2026';
                    if (!videoData.tags) videoData.tags = ['Innovation', 'Process'];
                    if (!videoData.description) videoData.description = 'General innovation video from DX department.';
                    // Ensure high res image for backdrop
                    videoData.backdrop = videoData.thumbnail.replace('w=640', 'w=1280');
                }
            }

            if (!videoData) return;

            // Populate Modal
            document.getElementById('infoModalBackdrop').src = videoData.backdrop || videoData.thumbnail;
            document.getElementById('infoModalTitle').textContent = videoData.title;
            // Updated to show Duration instead of Match Score, and Date instead of Year
            document.getElementById('infoModalDurationDisplay').textContent = videoData.duration;
            document.getElementById('infoModalDate').textContent = videoData.date || 'Jan 01, 2026';
            // document.getElementById('infoModalBadge').textContent = videoData.quality || 'HD'; // Removed
            // document.getElementById('infoModalDuration').textContent = videoData.duration; // Duplicate now

            document.getElementById('infoModalDescription').textContent = videoData.description || 'No description available for this video.';
            document.getElementById('infoModalCreator').textContent = videoData.creator || 'DX Creator';
            document.getElementById('infoModalTags').textContent = (videoData.tags || []).join(', ');

            // Setup Play Button
            const playBtn = document.getElementById('infoModalPlayBtn');
            playBtn.onclick = () => {
                closeVideoInfoModal();
                playVideo(videoId);
            };

            // Show Modal
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeVideoInfoModal() {
            const modal = document.getElementById('videoInfoModal');
            modal.classList.remove('active');
            document.body.style.overflow = '';
        }

        // Close info modal on backdrop click
        document.getElementById('videoInfoModal').addEventListener('click', (e) => {
            if (e.target.classList.contains('video-info-modal')) {
                closeVideoInfoModal();
            }
        });

        // ==================== NAVIGATION ====================

        function openGeneralPortfolio() {
            window.location.href = 'portfolio-viewer.html';
        }

        function openProjectManager() {
            window.location.href = 'project-manager.html';
        }

        // ==================== KEYBOARD SHORTCUTS ====================

        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeVideoModal();
                closeLoginModal();
            }
        });

        // Close modal on backdrop click
        document.getElementById('videoModal').addEventListener('click', (e) => {
            if (e.target.classList.contains('video-modal')) {
                closeVideoModal();
            }
        });

        // ==================== INITIALIZE ====================

        document.addEventListener('DOMContentLoaded', () => {
            renderInnovationCarousel();
            renderRankedCarousel();
            renderSuccessCarousel();
            setupCarouselControls();

            // Wait for dataManager to be ready (if using callbacks)
            // or just call it if it initializes synchronously from localStorage
            if (window.dataManager) {
                updateUserSection();
            }
        });

        // Listen for data loaded event (from init-data.js)
        document.addEventListener('dataLoaded', () => {
            console.log('游닍 Datos cargados en Video Showcase');
            updateUserSection();
        });

        // ==================== USER AUTHENTICATION ====================

        function updateUserSection() {
            const userSection = document.getElementById('userSection');
            const uploadVideoIsland = document.getElementById('uploadVideoIsland');
            // Use dataManager instead of direct localStorage
            const user = dataManager.getCurrentUser();

            if (user) {
                // Show upload video button (separate glass island)
                if (uploadVideoIsland) {
                    uploadVideoIsland.style.display = 'flex';
                }

                userSection.innerHTML = `
                    <div class="island-nav-divider"></div>
                    <div class="user-dropdown-wrapper">
                        <div class="user-info">
                            <div class="user-avatar">${getInitials(user.name)}</div>
                            <span class="user-name">${user.name}</span>
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14" style="opacity: 0.5;">
                                <path d="M6 9l6 6 6-6"/>
                            </svg>
                        </div>
                        <div class="user-dropdown-menu">
                            <button class="user-dropdown-item" onclick="navigateToMyVideos()">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polygon points="23 7 16 12 23 17 23 7"/>
                                    <rect x="1" y="5" width="15" height="14" rx="2" ry="2"/>
                                </svg>
                                My Videos
                            </button>
                            <button class="user-dropdown-item" onclick="navigateToMyProjects()">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/>
                                </svg>
                                My Projects
                            </button>
                            <button class="user-dropdown-item" onclick="navigateToMyProfile()">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                                    <circle cx="12" cy="7" r="4"/>
                                </svg>
                                My Profile
                            </button>
                            <button class="user-dropdown-item" onclick="navigateToHelp()">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="10"/>
                                    <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>
                                    <line x1="12" y1="17" x2="12.01" y2="17"/>
                                </svg>
                                Help & Support
                            </button>
                            <div class="user-dropdown-divider"></div>
                            <button class="user-dropdown-item logout-item" onclick="handleLogout()">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                                    <polyline points="16,17 21,12 16,7"/>
                                    <line x1="21" y1="12" x2="9" y2="12"/>
                                </svg>
                                Log Out
                            </button>
                        </div>
                    </div>
                `;
            } else {
                // Hide upload video button when not logged in
                if (uploadVideoIsland) {
                    uploadVideoIsland.style.display = 'none';
                }

                userSection.innerHTML = `
                    <div class="island-nav-divider"></div>
                    <button class="btn-login" onclick="openLoginModal()">
                        Login
                    </button>
                `;
            }
        }

        function getInitials(name) {
            return name
                .split(' ')
                .map(word => word[0])
                .join('')
                .toUpperCase()
                .slice(0, 2);
        }

        // ==================== DROPDOWN MENU NAVIGATION ====================

        function navigateToMyVideos() {
            window.location.href = 'my-videos.html';
        }

        function navigateToMyProjects() {
            window.location.href = 'my-projects.html';
        }

        function navigateToMyProfile() {
            const currentUser = dataManager.getCurrentUser();
            if (currentUser) {
                localStorage.setItem('viewingUserId', currentUser.id);
                window.location.href = 'portfolio-viewer.html';
            }
        }

        // ==================== LOGIN LOGIC (Ported from home.js) ====================

        function openLoginModal() {
            // Crear el modal si no existe
            let modalOverlay = document.getElementById('loginModalOverlay');

            if (!modalOverlay) {
                modalOverlay = document.createElement('div');
                modalOverlay.id = 'loginModalOverlay';
                modalOverlay.className = 'modal-overlay';
                modalOverlay.innerHTML = `
                    <div class="login-modal" onclick="event.stopPropagation()">
                        <button class="modal-close-btn" onclick="closeLoginModal()">칑</button>

                        <div class="login-modal-header">
                            <h2 class="login-modal-title">Login</h2>
                            <p class="login-modal-subtitle">Enter your credentials to continue.</p>
                        </div>

                        <div class="login-modal-body">
                            <form id="loginForm" onsubmit="handleLogin(event)">
                                <div id="loginError" class="form-error" style="display: none;"></div>

                                <div class="form-group">
                                    <label for="username">Username</label>
                                    <div class="form-input-wrapper">
                                        <svg class="form-input-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                            <circle cx="12" cy="7" r="4"></circle>
                                        </svg>
                                        <input
                                            type="text"
                                            id="username"
                                            name="username"
                                            placeholder="Your username"
                                            required
                                            autocomplete="username"
                                        >
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="password">Password</label>
                                    <div class="form-input-wrapper">
                                        <svg class="form-input-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                                            <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                                        </svg>
                                        <input
                                            type="password"
                                            id="password"
                                            name="password"
                                            placeholder="Your Password"
                                            required
                                            autocomplete="current-password"
                                        >
                                    </div>
                                </div>

                                <button type="submit" class="btn-submit">Login</button>
                            </form>

                            <div class="login-hint">
                                <p><strong>Usuario:</strong> firstname.lastname</p>
                                <p><strong>Contrase침a:</strong> demo123</p>
                            </div>
                        </div>
                    </div>
                `;
                document.body.appendChild(modalOverlay);

                // Cerrar al hacer click fuera del modal
                modalOverlay.addEventListener('click', closeLoginModal);
            }

            // Mostrar modal
            setTimeout(() => {
                modalOverlay.classList.add('active');
            }, 10);

            document.body.style.overflow = 'hidden';

            // Focus en el input de usuario
            setTimeout(() => {
                const usernameInput = document.getElementById('username');
                if (usernameInput) usernameInput.focus();
            }, 400);
        }

        function closeLoginModal() {
            const modalOverlay = document.getElementById('loginModalOverlay');
            if (modalOverlay) {
                modalOverlay.classList.remove('active');
                document.body.style.overflow = '';

                // Limpiar formulario despu칠s de la animaci칩n
                setTimeout(() => {
                    const form = document.getElementById('loginForm');
                    if (form) form.reset();
                    const errorDiv = document.getElementById('loginError');
                    if (errorDiv) errorDiv.style.display = 'none';
                }, 300);
            }
        }

        async function handleLogin(event) {
            event.preventDefault();

            console.log('游댏 Intentando login...');

            // Obtener los valores directamente del formulario
            const form = event.target;
            const usernameInput = form.querySelector('#username');
            const passwordInput = form.querySelector('#password');
            const errorDiv = document.getElementById('loginError');

            if (!usernameInput || !passwordInput) {
                console.error('仇 No se encontraron los inputs del formulario');
                return;
            }

            const username = usernameInput.value.trim();
            const password = passwordInput.value.trim();

            if (!username || !password) {
                errorDiv.textContent = 'Por favor, completa todos los campos';
                errorDiv.style.display = 'block';
                return;
            }

            try {
                // Check if dataManager is available
                if (typeof dataManager === 'undefined') {
                    console.error('Data manager not loaded');
                    errorDiv.textContent = 'System error: Data manager not loaded';
                    errorDiv.style.display = 'block';
                    return;
                }

                const res = await dataManager.login(username, password);

                if (res.success) {
                    console.log('九 Login exitoso');
                    closeLoginModal();
                    updateUserSection();
                    errorDiv.style.display = 'none';

                    // Mostrar mensaje de bienvenida
                    const user = dataManager.getCurrentUser();
                    if (user) {
                        showWelcomeMessage(user.name);
                    }
                } else {
                    console.log('仇 Login fallido:', res.message);
                    errorDiv.textContent = res.message || 'Usuario o contrase침a incorrectos';
                    errorDiv.style.display = 'block';
                }
            } catch (error) {
                console.error('仇 Error en login:', error);
                errorDiv.textContent = 'Error al iniciar sesi칩n. Intenta de nuevo.';
                errorDiv.style.display = 'block';
            }
        }

        function handleLogout() {
            if (confirm('쮼st치s seguro de que quieres cerrar sesi칩n?')) {
                dataManager.logout();
                updateUserSection();
                console.log('OK Sesion cerrada');
            }
        }

        function showWelcomeMessage(userName) {
            // Crear elemento de notificacion
            const notification = document.createElement('div');
            notification.className = 'welcome-notification';
            notification.innerHTML = `
                <div class="welcome-content">
                    <span class="welcome-icon">游녦</span>
                    <span class="welcome-text">춰Bienvenido, ${userName.split(' ')[0]}!</span>
                </div>
            `;

            document.body.appendChild(notification);

            // Mostrar con animacion
            setTimeout(() => {
                notification.classList.add('show');
            }, 100);

            // Ocultar despues de 3 segundos
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => {
                    notification.remove();
                }, 300);
            }, 3000);
        }
    </script>
</body>

</html>